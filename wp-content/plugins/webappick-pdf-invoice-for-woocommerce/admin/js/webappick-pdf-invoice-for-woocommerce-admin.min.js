"use strict";!function(a){a(window).scroll(function(){a(this).scrollTop()+a(window).height()<a(document).height()-150?a(".woo-invoice-save-changes-selector").addClass("woo-invoice-save-changes"):a(".woo-invoice-save-changes-selector").removeClass("woo-invoice-save-changes")}),a(window).on("mousewheel",function(e){var o=a(".woo-invoice-dashboard-content > li:eq(0)");a(".woo-invoice-dashboard-sidebar .woo-invoice-sidebar-navbar-light").height(o.parent().height()-23)}),a(window).load(function(){a("input[name='wf_tabs']").on("change",function(){var e=a(this).val();sessionStorage.setItem("active_tab",e)});var e,o,i=sessionStorage.getItem("active_tab"),t=("settings"===i?a("#tab1").attr("checked",!0):"seller&buyer"===i?a("#tab2").attr("checked",!0):"localization"===i?a("#tab3").attr("checked",!0):"bulk_download"===i&&a("#tab4").attr("checked",!0),0),n=0;a("#Date-from").on("change",function(){e=Date.parse(a(this).val()),n=1,t&&n&&o<e&&(alert("Input date should be less than or equal Date To"),a("#Date-from").val(""),n=0)}),a("#Date-to").on("change",function(){o=Date.parse(a(this).val()),(t=1)&&n&&o<e&&(alert("Input date should be greater than or equal Date From"),a("#Date-to").val(""),t=0)}),a(function(){var e,o=a(".woo-invoice-sidebar-navbar-nav > li > a"),i=a(".woo-invoice-dashboard-content > li");null!=sessionStorage.getItem("activeSidebarTab")?(e=sessionStorage.getItem("activeSidebarTab"),i.hide(),o.removeClass("active"),a(i[e]).show(),a(".woo-invoice-sidebar-navbar-nav > li:eq( "+e+" ) > a").addClass("active"),a(".woo-invoice-dashboard-sidebar .woo-invoice-sidebar-navbar-light").height(a(i[e]).parent().height()-23)):((e=a(".woo-invoice-dashboard-content > li:eq(0)")).css("display","block"),a(".woo-invoice-sidebar-navbar-nav > li:eq(0) > a").addClass("active"),a(".woo-invoice-dashboard-sidebar .woo-invoice-sidebar-navbar-light").height(e.parent().height()-23)),o.bind("click",function(e){e.preventDefault();e=a(this).parent().prevAll().length,i.hide(),o.removeClass("active"),a(i[e]).show(),a(this).addClass("active"),e=a(this).parent().prevAll().length;sessionStorage.setItem("activeSidebarTab",e),a(".woo-invoice-dashboard-sidebar .woo-invoice-sidebar-navbar-light").height(i.parent().height()-23)})})}),a(document).on("click",".woo-invoice-template-selection",function(e){e.preventDefault();e=a(this).data("template");a("#winvoiceModalTemplates").modal("hide"),a("body").removeClass(function(e,o){return(o.match(/\S+-modal-open(^|\s)/g)||[]).join(" ")}),a('div[class*="-modal-backdrop"]').remove(),a(this).find("img").removeClass("woo-invoice-template"),a(this).find("img").removeClass("woo-invoice-disable-template"),a(this).find("img").addClass("woo-invoice-slected-template"),a(".woo-invoice-element-disable").find("img").addClass("woo-invoice-template"),a(".woo-invoice-element-disable").find("img").removeClass("woo-invoice-disable-template"),a(".woo-invoice-element-disable").css("z-index","3333"),a(".woo-invoice-element-disable").siblings("div").css("z-index","1111"),a(".woo-invoice-element-disable").siblings("a").css("z-index","2222"),a(this).parent().siblings().find("img").removeClass("woo-invoice-slected-template").addClass("woo-invoice-template"),a.ajax({url:woo_invoice_ajax_obj_2.woo_invoice_ajax_url_2,type:"post",data:{_ajax_nonce:woo_invoice_ajax_obj_2.nonce,action:"wpifw_save_pdf_template",template:e},success:function(e){a(".woo-invoice-template-preview").attr("src",e.data.location+"/"+e.data.template_name+".png"),a(".invoice_template_preiview_btn").attr("href",e.data.location+"/"+e.data.template_name+".png")}})}),a(document).on("click",".woo-invoice-element-disable",function(e){e.preventDefault(),a(this).children("img").removeClass("woo-invoice-template"),a(this).children("img").addClass("woo-invoice-disable-template"),a(this).css("z-index","1111"),a(this).siblings("div").css("z-index","2222"),a(this).siblings("a").css("z-index","3333")}),flatpickr(".woo-invoice-datepicker",{dateFormat:"n/j/Y",allowInput:!0,onOpen:function(e,o,i){i.setDate(i.input.value,!1)}});var o=a(".woo_invoice_order_meta_html").first().clone(),i=(a(document).on("click",".woo-invoice-add-order-meta",function(e){e.preventDefault(),0<a(".woo_invoice_order_meta > .woo_invoice_order_meta_html").length?n("You can add more than 1 order meta in"):a(this).siblings(".woo_invoice_order_meta").append(o.clone())}),a(document).on("click",".woo-invoice-delete-order-meta",function(e){e.preventDefault(),a(this).parent().remove(),a(".woo_invoice_order_meta_html").length}),a(".woo_invoice_order_item_meta_html").first().clone()),t=(a(document).on("click",".woo-invoice-add-order-item-meta",function(e){e.preventDefault(),0<a(".woo_invoice_order_item_meta > .woo_invoice_order_item_meta_html").length?n("You can add more than 1 order item meta in"):a(this).siblings(".woo_invoice_order_item_meta").append(i.clone())}),a(document).on("click",".woo-invoice-delete-order-item-meta",function(e){e.preventDefault(),a(this).parent().remove(),a(".woo_invoice_order_item_meta_html").length}),a(".woo_invoice_product_meta_html").first().clone());function e(e,o){a(document).on("change","".concat(e).concat(o),function(e){var o=this;e.preventDefault(),"all"!==a(this).val()&&(a(this).parent().append('<p  class="woo_invoice_meta_html woo_invoice_col_3 woo_invoice_pro_notice">Notice: Challan Pro only.</p>'),setTimeout(function(){a(o).parent().children("p").hide("slow"),setTimeout(function(){a(o).parent().children("p").remove()},500)},2e3))})}function n(e){a(".woo-invoice-modal").show(),a(".woo-invoice-modal-body p").html("".concat(e,"  <a type='button' href='https://webappick.com/plugin/woocommerce-pdf-invoice-packing-slips/?utm_source=customer_site&utm_medium=free_vs_pro&utm_campaign=woo_invoice_free' target='_blank'>Challan Pro</a>"))}a(document).on("click",".woo-invoice-product-add-meta",function(e){e.preventDefault(),0<a(".woo_invoice_product_meta > .woo_invoice_product_meta_html").length?n("You can add more than 1 product meta in"):a(this).siblings(".woo_invoice_product_meta").append(t.clone())}),a(document).on("click",".woo-invoice-delete-product-meta",function(e){e.preventDefault(),a(this).parent().remove(),a(".woo_invoice_product_meta_html").length}),a(document).on("click","#wpifw_submit_bulk_download",function(o){a(this).parent().parent().serializeArray().map(function(e){"wpifw_bulk_type"==e.name&&"WPIFW_CSV"==e.value?(o.preventDefault(),n("To download bulk csv file you need")):"wpifw_bulk_type"==e.name&&"WPIFW_SHIPPING_LABEL"==e.value&&(o.preventDefault(),n("To download bulk shipping label you need"))})}),e("#","wpifw_bulk_download_order_payment_method"),e("#","wpifw_bulk_download_order_status"),a(".wpifw_attr").selectize({plugins:["remove_button"],render:{item:function(e,o){return'<div class="item wpifw_selector">'+o(e.text)+"</div>"}}}),a(document).on("change","#wpifw_bulk_type",function(e){e.preventDefault(),"WPIFW_CSV"==a(this).val()?a(".woo-invoice-add-csv-fields").show():a(".woo-invoice-add-csv-fields").hide()}),a(".woo-invoice-modal .woo-invoice-modal-close").on("click",function(){a(".woo-invoice-modal").hide()}),a(window).load(function(){a("#wpfooter #footer-thankyou").html("If you like <strong><ins>Challan</ins></strong> please leave us a <a target='_blank' style='color:#f9b918' href='https://wordpress.org/support/view/plugin-reviews/webappick-pdf-invoice-for-woocommerce?rate=5#postform'>★★★★★</a> rating. A huge thank you in advance!")})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYmFwcGljay1wZGYtaW52b2ljZS1mb3Itd29vY29tbWVyY2UtYWRtaW4uanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsInNjcm9sbCIsInNjcm9sbFRvcCIsImhlaWdodCIsImRvY3VtZW50IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9uIiwiZSIsImluaXRpYWxDb250ZW50IiwiYWN0aXZlVGFiIiwicGFyZW50IiwibG9hZCIsInNlbGVjdGVkVGFiIiwidGhpcyIsInZhbCIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsInRvQ2hlY2siLCJ0b19kYXRlIiwiZ2V0SXRlbSIsIkRhdGUiLCJwYXJzZSIsImZyb21DaGVjayIsImF0dHIiLCJmcm9tX2RhdGUiLCJhbGVydCIsImFjdGl2ZVRhYlNlbGVjdG9yIiwidGFiSW5kZXgiLCJ0YWJzIiwiY29udGVudHMiLCJhY3RpdmVTaWRlYmFyVGFiIiwic2VsZWN0ZWRTaWRlYmFyVGFiIiwic2hvdyIsImluZGV4IiwiY2xhc3NOYW1lIiwicHJldmVudERlZmF1bHQiLCJwcmV2QWxsIiwibGVuZ3RoIiwic2libGluZ3MiLCJmaW5kIiwid29vX2ludm9pY2VfYWpheF91cmxfMiIsIndvb19pbnZvaWNlX2FqYXhfb2JqXzIiLCJjaGlsZHJlbiIsInRlbXBsYXRlIiwiZGF0YSIsIm1vZGFsIiwibWF0Y2giLCJqb2luIiwicmVtb3ZlIiwic2VsZWN0ZWREYXRlcyIsImluc3RhbmNlIiwic2V0RGF0ZSIsImlucHV0IiwiY3NzIiwibWV0YU9yZGVySFRNTCIsImNsb25lIiwiYWpheCIsImRpc3BsYXlfY2hhbGxhbl9wcm9fbm90aWNlX21vZGFsIiwidHlwZSIsIl9hamF4X25vbmNlIiwibm9uY2UiLCJhY3Rpb24iLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJsb2NhdGlvbiIsInRlbXBsYXRlX25hbWUiLCJvcmRlckl0ZW1NZXRhIiwiZmxhdHBpY2tyIiwib25PcGVuIiwiZGF0ZVN0ciIsInByb2R1Y3RNZXRhIiwiZmlyc3QiLCJhcHBlbmQiLCJzZXRUaW1lb3V0IiwiZGlzcGxheV9jaGFsbGFuX3Byb19ub3RpY2VfZm9yX3NlbGVjdF9vcHRpb24iLCJzZWxlY3Rvcl90eXBlIiwic2VsZWN0b3IiLCJjb25jYXQiLCJfdGhpcyIsImhpZGUiLCJjb250ZW50IiwiaHRtbCIsInBsdWdpbnMiLCJzZXJpYWxpemVBcnJheSIsIm1hcCIsImZpZWxkIiwibmFtZSIsInZhbHVlIiwic2VsZWN0aXplIiwicmVuZGVyIiwiaXRlbSIsImVzY2FwZSIsInRleHQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJhQUFBLENBQUEsU0FBWUEsR0FxQlJBLEVBQUVDLE1BQUQsRUFBU0MsT0FBUkQsV0FFa0JFLEVBQUFBLElBQUFBLEVBQUFBLFVBQUFBLEVBQWVILEVBQVNJLE1BQVYsRUFBdEJBLE9BQXVCLEVBQXNCQyxFQUFEQSxRQUFDQSxFQUFGRCxPQUFFQyxFQUF3QixJQUNuRUwsRUFBQSxvQ0FBQSxFQUErQ00sU0FBQSwwQkFBL0MsRUFJTE4sRUFBQSxvQ0FBQSxFQUFBTyxZQUFBLDBCQUFBLENBSVBOLENBWEYsRUFpQlFELEVBQUFDLE1BQUEsRUFBQU8sR0FDQSxhQUFBLFNBQUFDLEdBWUEsSUFBQUMsRUFBQVYsRUFBQSwyQ0FBQSxFQVFLVyxFQUFBQSxrRUFBQUEsRUFBTFAsT0FBQU0sRUFBQUUsT0FBQSxFQUFBUixPQUFBLEVBQUEsRUFBS08sQ0FFRkEsQ0F2QkgsRUFVUlgsRUFpQllBLE1BakJYLEVBaUJhYSxLQURBLFdBTUFiLEVBQUEsdUJBQUEsRUFBaUJRLEdBQ25CLFNBQWdCLFdBR3BCLElBQUFNLEVBQUFkLEVBQUFlLElBQUEsRUFBQUMsSUFBQSxFQUdBQyxlQUFBQyxRQUFBLGFBQUFKLENBQUEsQ0FyQkssQ0FjQyxFQVVGSyxJQXVCV0MsRUFDT0EsRUF4QlhULEVBQVhNLGVBQUFJLFFBQUEsWUFBQSxFQXlCa0JGLEdBckJkLGFBREZSLEVBRWVYLEVBQUdzQixPQUFILEVBQVFDLEtBQVEsVUFBekIsQ0FBQSxDQUFTLEVBckJN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QU8vQyxFQUFLZ0QsSUFBTixFQUFjLFFBQ3BFLENBSEcsQ0FGWixDQURKLEVBY0E5RixFQUFFSyxRQUFELEVBQVdHLEdBQ1IsU0FBVyxtQkFBb0IsU0FBVUMsR0FDckNBLEVBQUU0QixlQUFGLEVBQ29CLGFBQWpCckMsRUFBRWUsSUFBRCxFQUFPQyxJQUFSLEVBQ0NoQixFQUFFLDZCQUFELEVBQWdDa0MsS0FBakMsRUFFQWxDLEVBQUUsNkJBQUQsRUFBZ0NpRixLQUFqQyxDQUVQLENBUkwsRUFzQkFqRixFQUFFLDZDQUFELEVBQWdEUSxHQUFHLFFBQVMsV0FDekRSLEVBQUUsb0JBQUQsRUFBdUJpRixLQUF4QixDQUNILENBRkQsRUFRQWpGLEVBQUVDLE1BQUQsRUFBU1ksS0FDTixXQUNJYixFQUFFLDRCQUFELEVBQStCbUYsS0FBSywwUUFBckMsQ0FDSCxDQUhMLENBeFpKLEVBOFpHWSxNQTlaSCIsImZpbGUiOiJ3ZWJhcHBpY2stcGRmLWludm9pY2UtZm9yLXdvb2NvbW1lcmNlLWFkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoICQgKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogQWxsIG9mIHRoZSBjb2RlIGZvciB5b3VyIGFkbWluLWZhY2luZyBKYXZhU2NyaXB0IHNvdXJjZVxuICAgICAqIHNob3VsZCByZXNpZGUgaW4gdGhpcyBmaWxlLlxuICAgICAqXG4gICAgICogTm90ZTogSXQgaGFzIGJlZW4gYXNzdW1lZCB5b3Ugd2lsbCB3cml0ZSBqUXVlcnkgY29kZSBoZXJlLCBzbyB0aGVcbiAgICAgKiAkIGZ1bmN0aW9uIHJlZmVyZW5jZSBoYXMgYmVlbiBwcmVwYXJlZCBmb3IgdXNhZ2Ugd2l0aGluIHRoZSBzY29wZVxuICAgICAqIG9mIHRoaXMgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIGVuYWJsZXMgeW91IHRvIGRlZmluZSBoYW5kbGVycywgZm9yIHdoZW4gdGhlIERPTSBpcyByZWFkeTpcbiAgICAgKlxuICAgICAqICQoZnVuY3Rpb24oKSB7XG4gICAgICpcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIHdpbmRvdyBpcyBsb2FkZWQ6XG4gICAgICovXG5cbiAgICAvLyBzY3JvbGwgYWRkIGFuZCByZW1vdmUgY2xhc3NcbiAgICAkKHdpbmRvdykuc2Nyb2xsKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSArICQod2luZG93KS5oZWlnaHQoKSA8ICQoZG9jdW1lbnQpLmhlaWdodCgpLTE1MCkge1xuICAgICAgICAgICAgICAgICQoJy53b28taW52b2ljZS1zYXZlLWNoYW5nZXMtc2VsZWN0b3InKS5hZGRDbGFzcyhcIndvby1pbnZvaWNlLXNhdmUtY2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgJCgnLndvby1pbnZvaWNlLXNhdmUtY2hhbmdlcy1zZWxlY3RvcicpLnJlbW92ZUNsYXNzKFwid29vLWludm9pY2Utc2F2ZS1jaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcblxuICAgICQod2luZG93KS5vbihcbiAgICAgICAgXCJtb3VzZXdoZWVsXCIsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIC8vaWYoJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgJCh3aW5kb3cpLmhlaWdodCgpID4gJChkb2N1bWVudCkuaGVpZ2h0KCktMTAwKSAge1xuXG4gICAgICAgICAgICAvLyQoXCIud29vLWludm9pY2Utc2F2ZS1jaGFuZ2VzLXNlbGVjdG9yXCIpLnJlbW92ZUNsYXNzKFwid29vLWludm9pY2Utc2F2ZS1jaGFuZ2VzXCIpO1xuICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgIC8vJChcIi53b28taW52b2ljZS1zYXZlLWNoYW5nZXMtc2VsZWN0b3JcIikuYWRkQ2xhc3MoXCJ3b28taW52b2ljZS1zYXZlLWNoYW5nZXNcIik7XG4gICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgdmFyIGluaXRpYWxDb250ZW50ID0gJChcIi53b28taW52b2ljZS1kYXNoYm9hcmQtY29udGVudCA+IGxpOmVxKDApXCIpO1xuICAgICAgICAgICAgJCgnLndvby1pbnZvaWNlLWRhc2hib2FyZC1zaWRlYmFyIC53b28taW52b2ljZS1zaWRlYmFyLW5hdmJhci1saWdodCcpLmhlaWdodChpbml0aWFsQ29udGVudC5wYXJlbnQoKS5oZWlnaHQoKS0yMyk7XG5cbiAgICAgICAgfVxuICAgICk7XG5cbiAgICAkKHdpbmRvdykubG9hZChcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAkKFwiaW5wdXRbbmFtZT0nd2ZfdGFicyddXCIpLm9uKFxuICAgICAgICAgICAgICAgICdjaGFuZ2UnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVGFiID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlX3RhYicsIHNlbGVjdGVkVGFiKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHZhciAgYWN0aXZlVGFiID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlX3RhYicpO1xuXG4gICAgICAgICAgICBpZihhY3RpdmVUYWIgPT09IFwic2V0dGluZ3NcIikge1xuICAgICAgICAgICAgICAgICQoJyN0YWIxJykuYXR0cihcImNoZWNrZWRcIiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIH1lbHNlIGlmKGFjdGl2ZVRhYiA9PT0gJ3NlbGxlciZidXllcicpIHtcbiAgICAgICAgICAgICAgICAkKCcjdGFiMicpLmF0dHIoXCJjaGVja2VkXCIsIHRydWUpO1xuXG4gICAgICAgICAgICB9ZWxzZSBpZihhY3RpdmVUYWIgPT09IFwibG9jYWxpemF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAkKCcjdGFiMycpLmF0dHIoXCJjaGVja2VkXCIsIHRydWUpO1xuXG4gICAgICAgICAgICB9ZWxzZSBpZihhY3RpdmVUYWIgPT09ICdidWxrX2Rvd25sb2FkJykge1xuICAgICAgICAgICAgICAgICQoJyN0YWI0JykuYXR0cihcImNoZWNrZWRcIiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNldCBhY3RpdmUgb2YgU2V0dGluZyB0YWIgZW5kZWRcblxuXG4gICAgICAgICAgICAvL0J1bGsgaW5wdXQgZGF0ZSB2YWxpZGF0aW9uXG4gICAgICAgICAgICB2YXIgZnJvbV9kYXRlO1xuICAgICAgICAgICAgdmFyIHRvX2RhdGU7XG4gICAgICAgICAgICB2YXIgdG9DaGVjayAgID0gMDtcbiAgICAgICAgICAgIHZhciBmcm9tQ2hlY2sgPSAwO1xuXG4gICAgICAgICAgICAkKCcjRGF0ZS1mcm9tJykub24oXG4gICAgICAgICAgICAgICAgJ2NoYW5nZScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tX2RhdGUgPSBEYXRlLnBhcnNlKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tQ2hlY2sgPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZih0b0NoZWNrICYmIGZyb21DaGVjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9fZGF0ZTxmcm9tX2RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIklucHV0IGRhdGUgc2hvdWxkIGJlIGxlc3MgdGhhbiBvciBlcXVhbCBEYXRlIFRvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNEYXRlLWZyb20nKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUNoZWNrID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgJCgnI0RhdGUtdG8nKS5vbihcbiAgICAgICAgICAgICAgICAnY2hhbmdlJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvX2RhdGUgPSBEYXRlLnBhcnNlKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICB0b0NoZWNrID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYodG9DaGVjayAmJiBmcm9tQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvX2RhdGU8ZnJvbV9kYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJJbnB1dCBkYXRlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgRGF0ZSBGcm9tXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNEYXRlLXRvJykudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQ2hlY2sgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICQoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJzID0gJCgnLndvby1pbnZvaWNlLXNpZGViYXItbmF2YmFyLW5hdiA+IGxpID4gYScpOyAvL2dyYWIgdGFic1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSAkKCcud29vLWludm9pY2UtZGFzaGJvYXJkLWNvbnRlbnQgPiBsaScpOyAvL2dyYWIgY29udGVudHNcblxuICAgICAgICAgICAgICAgICAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVTaWRlYmFyVGFiJykgIT0gbnVsbCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVNpZGViYXJUYWIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVTaWRlYmFyVGFiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5oaWRlKCk7IC8vaGlkZSBhbGwgY29udGVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOyAvL3JlbW92ZSAnY3VycmVudCcgY2xhc3Nlc1xuICAgICAgICAgICAgICAgICAgICAgICAgJChjb250ZW50c1thY3RpdmVTaWRlYmFyVGFiXSkuc2hvdygpOyAvL3Nob3cgdGFiIGNvbnRlbnQgdGhhdCBtYXRjaGVzIHRhYiB0aXRsZSBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVRhYlNlbGVjdG9yID0gJChcIi53b28taW52b2ljZS1zaWRlYmFyLW5hdmJhci1uYXYgPiBsaTplcSggXCIrYWN0aXZlU2lkZWJhclRhYitcIiApID4gYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYlNlbGVjdG9yLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7IC8vYWRkIGN1cnJlbnQgY2xhc3Mgb24gY2xpY2tlZCB0YWIgdGl0bGUqL1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndvby1pbnZvaWNlLWRhc2hib2FyZC1zaWRlYmFyIC53b28taW52b2ljZS1zaWRlYmFyLW5hdmJhci1saWdodCcpLmhlaWdodCgkKGNvbnRlbnRzW2FjdGl2ZVNpZGViYXJUYWJdKS5wYXJlbnQoKS5oZWlnaHQoKS0yMyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbml0aWFsQ29udGVudCA9ICQoXCIud29vLWludm9pY2UtZGFzaGJvYXJkLWNvbnRlbnQgPiBsaTplcSgwKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxDb250ZW50LmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7IC8vc2hvdyB0YWIgY29udGVudCB0aGF0IG1hdGNoZXMgdGFiIHRpdGxlIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlVGFiU2VsZWN0b3IgPSAkKFwiLndvby1pbnZvaWNlLXNpZGViYXItbmF2YmFyLW5hdiA+IGxpOmVxKDApID4gYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYlNlbGVjdG9yLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy53b28taW52b2ljZS1kYXNoYm9hcmQtc2lkZWJhciAud29vLWludm9pY2Utc2lkZWJhci1uYXZiYXItbGlnaHQnKS5oZWlnaHQoaW5pdGlhbENvbnRlbnQucGFyZW50KCkuaGVpZ2h0KCktMjMpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGFicy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJyxmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiSW5kZXggPSAkKHRoaXMpLnBhcmVudCgpLnByZXZBbGwoKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLmhpZGUoKTsgLy9oaWRlIGFsbCBjb250ZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsgLy9yZW1vdmUgJ2N1cnJlbnQnIGNsYXNzZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjb250ZW50c1t0YWJJbmRleF0pLnNob3coKTsgLy9zaG93IHRhYiBjb250ZW50IHRoYXQgbWF0Y2hlcyB0YWIgdGl0bGUgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7IC8vYWRkIGN1cnJlbnQgY2xhc3Mgb24gY2xpY2tlZCB0YWIgdGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkU2lkZWJhclRhYiA9ICQodGhpcykucGFyZW50KCkucHJldkFsbCgpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlU2lkZWJhclRhYicsIHNlbGVjdGVkU2lkZWJhclRhYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy53b28taW52b2ljZS1kYXNoYm9hcmQtc2lkZWJhciAud29vLWludm9pY2Utc2lkZWJhci1uYXZiYXItbGlnaHQnKS5oZWlnaHQoY29udGVudHMucGFyZW50KCkuaGVpZ2h0KCktMjMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cblxuICAgICAgICB9XG4gICAgKTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgJ2NsaWNrJywgJy53b28taW52b2ljZS10ZW1wbGF0ZS1zZWxlY3Rpb24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gJCh0aGlzKS5kYXRhKCd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgJCgnI3dpbnZvaWNlTW9kYWxUZW1wbGF0ZXMnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjbGFzc05hbWUubWF0Y2goL1xcUystbW9kYWwtb3BlbihefFxccykvZykgfHwgW10pLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgJCgnZGl2W2NsYXNzKj1cIi1tb2RhbC1iYWNrZHJvcFwiXScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmVDbGFzcygnd29vLWludm9pY2UtdGVtcGxhdGUnKTtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykucmVtb3ZlQ2xhc3MoJ3dvby1pbnZvaWNlLWRpc2FibGUtdGVtcGxhdGUnKTtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykuYWRkQ2xhc3MoJ3dvby1pbnZvaWNlLXNsZWN0ZWQtdGVtcGxhdGUnKTtcblxuICAgICAgICAgICAgJChcIi53b28taW52b2ljZS1lbGVtZW50LWRpc2FibGVcIikuZmluZCgnaW1nJykuYWRkQ2xhc3MoJ3dvby1pbnZvaWNlLXRlbXBsYXRlJyk7XG4gICAgICAgICAgICAkKFwiLndvby1pbnZvaWNlLWVsZW1lbnQtZGlzYWJsZVwiKS5maW5kKCdpbWcnKS5yZW1vdmVDbGFzcygnd29vLWludm9pY2UtZGlzYWJsZS10ZW1wbGF0ZScpO1xuICAgICAgICAgICAgJChcIi53b28taW52b2ljZS1lbGVtZW50LWRpc2FibGVcIikuY3NzKCd6LWluZGV4JyxcIjMzMzNcIik7XG4gICAgICAgICAgICAkKFwiLndvby1pbnZvaWNlLWVsZW1lbnQtZGlzYWJsZVwiKS5zaWJsaW5ncyhcImRpdlwiKS5jc3MoJ3otaW5kZXgnLFwiMTExMVwiKTtcbiAgICAgICAgICAgICQoXCIud29vLWludm9pY2UtZWxlbWVudC1kaXNhYmxlXCIpLnNpYmxpbmdzKFwiYVwiKS5jc3MoJ3otaW5kZXgnLFwiMjIyMlwiKTtcblxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJ2ltZycpLnJlbW92ZUNsYXNzKCd3b28taW52b2ljZS1zbGVjdGVkLXRlbXBsYXRlJykuYWRkQ2xhc3MoJ3dvby1pbnZvaWNlLXRlbXBsYXRlJyk7XG4gICAgICAgICAgICAkLmFqYXgoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHdvb19pbnZvaWNlX2FqYXhfb2JqXzIud29vX2ludm9pY2VfYWpheF91cmxfMixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWpheF9ub25jZTogd29vX2ludm9pY2VfYWpheF9vYmpfMi5ub25jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJ3cGlmd19zYXZlX3BkZl90ZW1wbGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndvby1pbnZvaWNlLXRlbXBsYXRlLXByZXZpZXcnKS5hdHRyKCdzcmMnLHJlc3BvbnNlLmRhdGEubG9jYXRpb24rJy8nK3Jlc3BvbnNlLmRhdGEudGVtcGxhdGVfbmFtZSsnLnBuZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmludm9pY2VfdGVtcGxhdGVfcHJlaXZpZXdfYnRuJykuYXR0cignaHJlZicscmVzcG9uc2UuZGF0YS5sb2NhdGlvbisnLycrcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZV9uYW1lKycucG5nJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgKTtcblxuXG4gICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICdjbGljaycsIFwiLndvby1pbnZvaWNlLWVsZW1lbnQtZGlzYWJsZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW1nJykucmVtb3ZlQ2xhc3MoJ3dvby1pbnZvaWNlLXRlbXBsYXRlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5hZGRDbGFzcygnd29vLWludm9pY2UtZGlzYWJsZS10ZW1wbGF0ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ3otaW5kZXgnLFwiMTExMVwiKTtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoXCJkaXZcIikuY3NzKCd6LWluZGV4JyxcIjIyMjJcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiYVwiKS5jc3MoJ3otaW5kZXgnLFwiMzMzM1wiKTtcblxuICAgICAgICB9XG4gICAgKTtcblxuICAgIC8vRGF0ZXBpY2tlclxuICAgIGZsYXRwaWNrcihcbiAgICAgICAgXCIud29vLWludm9pY2UtZGF0ZXBpY2tlclwiLCB7XG4gICAgICAgICAgICBcImRhdGVGb3JtYXRcIjpcIm4vai9ZXCIsXG4gICAgICAgICAgICBcImFsbG93SW5wdXRcIjp0cnVlLFxuICAgICAgICAgICAgXCJvbk9wZW5cIjogZnVuY3Rpb24gKHNlbGVjdGVkRGF0ZXMsIGRhdGVTdHIsIGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc2V0RGF0ZShpbnN0YW5jZS5pbnB1dC52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIERpc3BsYXkgb3JkZXIgbWV0YSBmb3IgaW52b2ljZS5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgdmFyIG1ldGFPcmRlckhUTUwgPSAkKFwiLndvb19pbnZvaWNlX29yZGVyX21ldGFfaHRtbFwiKS5maXJzdCgpLmNsb25lKCk7XG5cbiAgICAvLyBjbG9uZSBhIG5ldyBpbnB1dCBmaWVsZCBmb3Igc2V0dGluZyBvcmRlciBtYXRlLlxuICAgICQoZG9jdW1lbnQpLm9uKFxuICAgICAgICAnY2xpY2snLCAnLndvby1pbnZvaWNlLWFkZC1vcmRlci1tZXRhJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYoJChcIi53b29faW52b2ljZV9vcmRlcl9tZXRhID4gLndvb19pbnZvaWNlX29yZGVyX21ldGFfaHRtbFwiKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBkaXNwbGF5X2NoYWxsYW5fcHJvX25vdGljZV9tb2RhbCgnWW91IGNhbiBhZGQgbW9yZSB0aGFuIDEgb3JkZXIgbWV0YSBpbicpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiLndvb19pbnZvaWNlX29yZGVyX21ldGFcIikuYXBwZW5kKG1ldGFPcmRlckhUTUwuY2xvbmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gZGVsZXRlIG9yZGVyIG1ldGEuXG4gICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICdjbGljaycsICcud29vLWludm9pY2UtZGVsZXRlLW9yZGVyLW1ldGEnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGlmKCQoXCIud29vX2ludm9pY2Vfb3JkZXJfbWV0YV9odG1sXCIpLmxlbmd0aD09PVwiMVwiKSB7XG4gICAgICAgICAgICAgICAgLy8kKCcud29vX2ludm9pY2UtYWRkLW9yZGVyLW1ldGEgLmRhc2hpY29ucy1wbHVzLWFsdCcpLmNzcyhcIm1hcmdpbi1sZWZ0XCIsXCIwcHhcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gIEVuZCA6ICBkaXNwbGF5IG9yZGVyIG1ldGEgIGZvciBpbnZvaWNlLlxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBEaXNwbGF5IG9yZGVyIGl0ZW0gbWV0YSBmb3IgaW52b2ljZS5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgdmFyIG9yZGVySXRlbU1ldGEgPSAkKFwiLndvb19pbnZvaWNlX29yZGVyX2l0ZW1fbWV0YV9odG1sXCIpLmZpcnN0KCkuY2xvbmUoKTtcbiAgICAvLyBjbG9uZSBhIG5ldyBpbnB1dCBmaWVsZCBmb3Igc2V0dGluZyBvcmRlciBtYXRlLlxuICAgICQoZG9jdW1lbnQpLm9uKFxuICAgICAgICAnY2xpY2snLCAnLndvby1pbnZvaWNlLWFkZC1vcmRlci1pdGVtLW1ldGEnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYoJChcIi53b29faW52b2ljZV9vcmRlcl9pdGVtX21ldGEgPiAud29vX2ludm9pY2Vfb3JkZXJfaXRlbV9tZXRhX2h0bWxcIikubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgZGlzcGxheV9jaGFsbGFuX3Byb19ub3RpY2VfbW9kYWwoJ1lvdSBjYW4gYWRkIG1vcmUgdGhhbiAxIG9yZGVyIGl0ZW0gbWV0YSBpbicpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiLndvb19pbnZvaWNlX29yZGVyX2l0ZW1fbWV0YVwiKS5hcHBlbmQob3JkZXJJdGVtTWV0YS5jbG9uZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG4gICAgLy8gZGVsZXRlIG9yZGVyIG1ldGEuXG4gICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICdjbGljaycsICcud29vLWludm9pY2UtZGVsZXRlLW9yZGVyLWl0ZW0tbWV0YScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgaWYoJChcIi53b29faW52b2ljZV9vcmRlcl9pdGVtX21ldGFfaHRtbFwiKS5sZW5ndGg9PT1cIjFcIikge1xuICAgICAgICAgICAgICAgIC8vJCgnLndvb19pbnZvaWNlLWFkZC1vcmRlci1tZXRhIC5kYXNoaWNvbnMtcGx1cy1hbHQnKS5jc3MoXCJtYXJnaW4tbGVmdFwiLFwiMHB4XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gIEVuZCA6ICBkaXNwbGF5IG9yZGVyIGl0ZW0gbWV0YSBmb3IgaW52b2ljZS5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gRGlzcGxheSBwcm9kdWN0IG1ldGEgZm9yIGludm9pY2UuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHZhciBwcm9kdWN0TWV0YSA9ICQoXCIud29vX2ludm9pY2VfcHJvZHVjdF9tZXRhX2h0bWxcIikuZmlyc3QoKS5jbG9uZSgpO1xuXG4gICAgLy8gY2xvbmUgYSBuZXcgaW5wdXQgZmllbGQgZm9yIHNldHRpbmcgb3JkZXIgbWF0ZS5cbiAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgJ2NsaWNrJywgJy53b28taW52b2ljZS1wcm9kdWN0LWFkZC1tZXRhJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmKCQoXCIud29vX2ludm9pY2VfcHJvZHVjdF9tZXRhID4gLndvb19pbnZvaWNlX3Byb2R1Y3RfbWV0YV9odG1sXCIpLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIGRpc3BsYXlfY2hhbGxhbl9wcm9fbm90aWNlX21vZGFsKCdZb3UgY2FuIGFkZCBtb3JlIHRoYW4gMSBwcm9kdWN0IG1ldGEgaW4nKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncyhcIi53b29faW52b2ljZV9wcm9kdWN0X21ldGFcIikuYXBwZW5kKHByb2R1Y3RNZXRhLmNsb25lKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcbiAgICAvLyBkZWxldGUgb3JkZXIgbWV0YS5cbiAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgJ2NsaWNrJywgJy53b28taW52b2ljZS1kZWxldGUtcHJvZHVjdC1tZXRhJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZigkKFwiLndvb19pbnZvaWNlX3Byb2R1Y3RfbWV0YV9odG1sXCIpLmxlbmd0aD09PVwiMVwiKSB7XG4gICAgICAgICAgICAgICAgLy8kKCcud29vX2ludm9pY2UtYWRkLW9yZGVyLW1ldGEgLmRhc2hpY29ucy1wbHVzLWFsdCcpLmNzcyhcIm1hcmdpbi1sZWZ0XCIsXCIwcHhcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gIEVuZCA6ICBkaXNwbGF5IG9yZGVyIG1ldGEgIGZvciBpbnZvaWNlLlxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIEFsZXJ0IGZvciBidWxrIGNzdiBmaWxlIGFuZCBzaGlwcGluZyBsYWJlbC5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICdjbGljaycsICcjd3BpZndfc3VibWl0X2J1bGtfZG93bmxvYWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zZXJpYWxpemVBcnJheSgpLm1hcCgoZmllbGQpPT57XG4gICAgICAgICAgICAgICAgaWYoZmllbGQubmFtZSA9PSAnd3BpZndfYnVsa190eXBlJyAmJiBmaWVsZC52YWx1ZSA9PSAnV1BJRldfQ1NWJyl7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9jaGFsbGFuX3Byb19ub3RpY2VfbW9kYWwoJ1RvIGRvd25sb2FkIGJ1bGsgY3N2IGZpbGUgeW91IG5lZWQnKVxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGZpZWxkLm5hbWUgPT0gJ3dwaWZ3X2J1bGtfdHlwZScgJiYgZmllbGQudmFsdWUgPT0gJ1dQSUZXX1NISVBQSU5HX0xBQkVMJyl7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9jaGFsbGFuX3Byb19ub3RpY2VfbW9kYWwoJ1RvIGRvd25sb2FkIGJ1bGsgc2hpcHBpbmcgbGFiZWwgeW91IG5lZWQnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICApO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyAgRW5kIDogIEFsZXJ0IGZvciBidWxrIGNzdiBmaWxlIGFuZCBzaGlwcGluZyBsYWJlbC5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vICBTdGFydCA6ICBQYXltZW50IG1ldGhvZCBzZWxlY3Qgb3B0aW9uIG5vdGljZS5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGZ1bmN0aW9uIGRpc3BsYXlfY2hhbGxhbl9wcm9fbm90aWNlX2Zvcl9zZWxlY3Rfb3B0aW9uKHNlbGVjdG9yX3R5cGUsIHNlbGVjdG9yICkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICdjaGFuZ2UnICwgYCR7c2VsZWN0b3JfdHlwZX0ke3NlbGVjdG9yfWAgLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCkgIT09ICdhbGwnKXtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoYDxwICBjbGFzcz1cIndvb19pbnZvaWNlX21ldGFfaHRtbCB3b29faW52b2ljZV9jb2xfMyB3b29faW52b2ljZV9wcm9fbm90aWNlXCI+Tm90aWNlOiBDaGFsbGFuIFBybyBvbmx5LjwvcD5gKVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCdwJykuaGlkZSgnc2xvdycpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbigncCcpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICAgICAgICAgIH0sMjAwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIClcblxuICAgIH1cbiAgICBkaXNwbGF5X2NoYWxsYW5fcHJvX25vdGljZV9mb3Jfc2VsZWN0X29wdGlvbignIycsICd3cGlmd19idWxrX2Rvd25sb2FkX29yZGVyX3BheW1lbnRfbWV0aG9kJylcbiAgICBkaXNwbGF5X2NoYWxsYW5fcHJvX25vdGljZV9mb3Jfc2VsZWN0X29wdGlvbignIycsICd3cGlmd19idWxrX2Rvd25sb2FkX29yZGVyX3N0YXR1cycpXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyAgRW5kIDogIFBheW1lbnQgbWV0aG9kIHNlbGVjdCBvcHRpb24gbm90aWNlLlxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICQoJy53cGlmd19hdHRyJykuc2VsZWN0aXplKFxuICAgICAgICB7XG4gICAgICAgICAgICBwbHVnaW5zOiBbJ3JlbW92ZV9idXR0b24nXSxcbiAgICAgICAgICAgIHJlbmRlcjoge1xuICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uIChkYXRhLCBlc2NhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaXRlbSB3cGlmd19zZWxlY3RvclwiPicgKyBlc2NhcGUoZGF0YS50ZXh0KSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBEaXNwbGF5IGNzdiBmaWxlXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgJ2NoYW5nZScgLCAnI3dwaWZ3X2J1bGtfdHlwZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCkgPT0gJ1dQSUZXX0NTVicpe1xuICAgICAgICAgICAgICAgICQoJy53b28taW52b2ljZS1hZGQtY3N2LWZpZWxkcycpLnNob3coKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgJCgnLndvby1pbnZvaWNlLWFkZC1jc3YtZmllbGRzJykuaGlkZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFN0YXJ0IDogU2hvdyBtb2RhbCBhbmQgY2xvc2UgbW9kYWwuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBtb2RhbCBzaG93IGZ1bmN0aW9uXG4gICAgZnVuY3Rpb24gZGlzcGxheV9jaGFsbGFuX3Byb19ub3RpY2VfbW9kYWwoY29udGVudCl7XG4gICAgICAgICQoJy53b28taW52b2ljZS1tb2RhbCcpLnNob3coKTtcbiAgICAgICAgJCgnLndvby1pbnZvaWNlLW1vZGFsLWJvZHkgcCcpLmh0bWwoYCR7Y29udGVudH0gIDxhIHR5cGU9J2J1dHRvbicgaHJlZj0naHR0cHM6Ly93ZWJhcHBpY2suY29tL3BsdWdpbi93b29jb21tZXJjZS1wZGYtaW52b2ljZS1wYWNraW5nLXNsaXBzLz91dG1fc291cmNlPWN1c3RvbWVyX3NpdGUmdXRtX21lZGl1bT1mcmVlX3ZzX3BybyZ1dG1fY2FtcGFpZ249d29vX2ludm9pY2VfZnJlZScgdGFyZ2V0PSdfYmxhbmsnPkNoYWxsYW4gUHJvPC9hPmApXG4gICAgfVxuXG4gICAgLy8gQ2xvc2UgbW9kYWwuXG4gICAgJCgnLndvby1pbnZvaWNlLW1vZGFsIC53b28taW52b2ljZS1tb2RhbC1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpe1xuICAgICAgICAkKCcud29vLWludm9pY2UtbW9kYWwnKS5oaWRlKCk7XG4gICAgfSlcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gRW5kIDogU2hvdyBtb2RhbCBhbmQgY2xvc2UgbW9kYWwuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICQod2luZG93KS5sb2FkKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI3dwZm9vdGVyICNmb290ZXItdGhhbmt5b3VcIikuaHRtbChcIklmIHlvdSBsaWtlIDxzdHJvbmc+PGlucz5DaGFsbGFuPC9pbnM+PC9zdHJvbmc+IHBsZWFzZSBsZWF2ZSB1cyBhIDxhIHRhcmdldD0nX2JsYW5rJyBzdHlsZT0nY29sb3I6I2Y5YjkxOCcgaHJlZj0naHR0cHM6Ly93b3JkcHJlc3Mub3JnL3N1cHBvcnQvdmlldy9wbHVnaW4tcmV2aWV3cy93ZWJhcHBpY2stcGRmLWludm9pY2UtZm9yLXdvb2NvbW1lcmNlP3JhdGU9NSNwb3N0Zm9ybSc+4piF4piF4piF4piF4piFPC9hPiByYXRpbmcuIEEgaHVnZSB0aGFuayB5b3UgaW4gYWR2YW5jZSFcIik7XG4gICAgICAgIH1cbiAgICApO1xuXG59KShqUXVlcnkpOyJdfQ==
